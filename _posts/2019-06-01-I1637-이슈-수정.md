---
title: I1637 이슈 수정
categories: 
author_staff_member: 1minjae
date: 2019-06-01
---

이 포스팅은 이 [commit](https://github.com/19-1-skku-oss/2019-1-OSS-L3/pull/9)에 관하여 작성된 것입니다.

## 시작
원본 repository에 대해 이슈를 탐색하던 중 [이러한 이슈](https://github.com/gunthercox/ChatterBot/pull/1739)를 확인하게 되었습니다. 요약하자면, `_generate_export_data` 함수에서 중복된 데이터가 생긴다는 것이었습니다. 쉬운 내용으로 보여 한번 도전해 보았습니다.

## 해결 방안 찾기
ChatterBot은 학습된 데이터를 sqlite3 또는 mongodb에 저장하는데, 단순히 사용자의 실수로 중복된 데이터가 두 번 학습될 경우 데이터베이스에 두 번 저장되던 것이었습니다. 따라서 중복 학습을 막으면 해결될 일이었습니다. 그러나 전체 코드의 작동 방식을 완벽히 모르는 상태에서 학습 과정을 수정하는 것은 어떤 부작용을 가져올지 모르는 일이었습니다. 따라서 `_generate_export_data` 함수만 수정하기로 하였습니다. 중복 제거에는 다양한 방식이 있습니다. 처음에는 `if data not in list:`
등의 코드를 사용하였지만 추출 데이터가 클 경우 속도에 문제가 있을 것 같아 `set()` 자료구조를 사용하여 제거하기로 하였습니다.

## 문제점 발생
그러나 ChatterBot의 테스트 케이스를 통과하지 못했습니다. 로그를 확인해 보니 `set()` 자료구조는 수정될 수 있는 데이터를 허용하지 않기에 `tuple` 형태로 넣었지만, 원래는 `list` 형태였기에 테스트 케이스를 통과하지 못한 것입니다.

## 해결
`list(map(list, result))` 코드를 통해 결과값의 `tuple`들을 모두 `list`로 변경해 줌으로써 테스트 케이스를 통과하였습니다.