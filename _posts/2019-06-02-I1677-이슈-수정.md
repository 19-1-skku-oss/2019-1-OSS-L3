---
title: I1677 이슈 수정
categories: 
author_staff_member: 1minjae
date: 2019-06-02
---

이 포스팅은 이 [commit](https://github.com/19-1-skku-oss/2019-1-OSS-L3/pull/8)을 설명하기 위해서 작성된 글입니다.

## 문제  
이 [이슈](https://github.com/gunthercox/ChatterBot/issues/1677)를 해결하기 위함입니다. ChatterBot은 답변을 선택하는 방식을 미리 준비된 어댑터에 따라 바꿀 수 있는데, 그 중 SpecificResponseAdapter를 사용할 경우 분명 스펙대로라면 문자열이 선택되어져야 함에도 불구하고 선택되지 않았습니다.

## 분석
코드를 보면 문자열을 선택하는 기준을 `statement`와 `input_text`를 비교하여 선택하고 하고 있습니다. 그러나 코드를 보면 `statement == input_text` 식으로 작성되어져 있는데, `statement`는 `Statement` 클래스이고 `input_text`는 `str` 형식이라 비교하면 어떠한 상황에서든 `False`를 반환한습니다.
`Statement`에 작성된 `__str__` 함수를 보면 `text` 변수를 반환하도록 되어 있는데, 아마 코드 작성자가 `print(statement)`로 호출하면 자동으로 `__str__` 함수가 호출되어 `text` 변수가 출력되는 것을 클래스와 문자열 비교시에도 `__str__` 함수가 호출되는 것인 줄 알고 작성한 것 같습니다. 실제로 이슈에도 `statement`를 `statement.text`로 바꿨더니 잘 동작했다고 하는 내용이 있습니다.

## 해결

문제점을 알았으니 쉽게 해결할 수 있었습니다. 이슈 제보자의 말대로 `text` 변수를 호출하면 되는 일이라, `str` 함수를 명시적으로 호출하여 해당 버그를 해결할 수 있었습니다.

[example code](https://github.com/gunthercox/ChatterBot/blob/master/examples/specific_response_example.py)를 사용하여 테스트해 보았습니다.

수정 이전
![before](https://user-images.githubusercontent.com/48241766/58614077-5a49e700-82f2-11e9-9a16-db241fefbe10.png)

수정 이후
![after](https://user-images.githubusercontent.com/48241766/58614087-603fc800-82f2-11e9-902b-59732a7c1d62.png)
